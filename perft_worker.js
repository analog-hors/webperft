(()=>{"use strict";var e,t,n,r,o={448:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var r=n(798),o=e([r]);r=(o.then?(await o)():o)[0],addEventListener("message",(e=>{const{fen:t,depth:n,chess960:o}=e.data,a=new r.kP(t,o),i=(0,r.q1)(a,n);a.free(),postMessage(i)})),postMessage(null),t()}catch(e){t(e)}}))},798:(e,t,n)=>{n.a(e,(async(r,o)=>{try{n.d(t,{Ih:()=>$,Or:()=>D,gk:()=>B,h4:()=>U,hd:()=>P,kP:()=>q,q1:()=>T,t$:()=>I,ug:()=>L,yq:()=>M});var a=n(328);e=n.hmd(e);var i=r([a]);a=(i.then?(await i)():i)[0];let _=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});_.decode();let c=new Uint8Array;function s(){return 0===c.byteLength&&(c=new Uint8Array(a.memory.buffer)),c}function d(e,t){return _.decode(s().subarray(e,e+t))}const u=new Array(32).fill(void 0);u.push(void 0,null,!0,!1);let f=u.length;function p(e){f===u.length&&u.push(u.length+1);const t=f;return f=u[t],u[t]=e,t}function l(e){return u[e]}function w(e){e<36||(u[e]=f,f=e)}function b(e){const t=l(e);return w(e),t}let h=0,y=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8");const g="function"==typeof y.encodeInto?function(e,t){return y.encodeInto(e,t)}:function(e,t){const n=y.encode(e);return t.set(n),{read:e.length,written:n.length}};function m(e,t,n){if(void 0===n){const n=y.encode(e),r=t(n.length);return s().subarray(r,r+n.length).set(n),h=n.length,r}let r=e.length,o=t(r);const a=s();let i=0;for(;i<r;i++){const t=e.charCodeAt(i);if(t>127)break;a[o+i]=t}if(i!==r){0!==i&&(e=e.slice(i)),o=n(o,r,r=i+3*e.length);const t=s().subarray(o+i,o+r);i+=g(e,t).written}return h=i,o}function v(e){return null==e}let k=new Int32Array;function x(){return 0===k.byteLength&&(k=new Int32Array(a.memory.buffer)),k}let E=new Uint32Array;function S(e,t){const n=(0===E.byteLength&&(E=new Uint32Array(a.memory.buffer)),E).subarray(e/4,e/4+t),r=[];for(let e=0;e<n.length;e++)r.push(b(n[e]));return r}function A(e,t){if(!(e instanceof t))throw new Error(`expected instance of ${t.name}`);return e.ptr}const j=new Uint32Array(2),O=new BigUint64Array(j.buffer);function T(e,t){try{const o=a.__wbindgen_add_to_stack_pointer(-16);A(e,q),a.perft(o,e.ptr,t);var n=x()[o/4+0],r=x()[o/4+1];return j[0]=n,j[1]=r,O[0]}finally{a.__wbindgen_add_to_stack_pointer(16)}}class q{static __wrap(e){const t=Object.create(q.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_wpboard_free(e)}constructor(e,t){try{const o=a.__wbindgen_add_to_stack_pointer(-16),i=m(e,a.__wbindgen_malloc,a.__wbindgen_realloc),_=h;a.wpboard_new(o,i,_,v(t)?16777215:t?1:0);var n=x()[o/4+0],r=x()[o/4+1];if(x()[o/4+2])throw b(r);return q.__wrap(n)}finally{a.__wbindgen_add_to_stack_pointer(16)}}play(e){try{const r=a.__wbindgen_add_to_stack_pointer(-16),o=m(e,a.__wbindgen_malloc,a.__wbindgen_realloc),i=h;a.wpboard_play(r,this.ptr,o,i);var t=x()[r/4+0],n=x()[r/4+1];if(x()[r/4+2])throw b(n);return q.__wrap(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}moves(){try{const o=a.__wbindgen_add_to_stack_pointer(-16);a.wpboard_moves(o,this.ptr);var e=x()[o/4+0],t=x()[o/4+1],n=x()[o/4+2];if(x()[o/4+3])throw b(n);var r=S(e,t).slice();return a.__wbindgen_free(e,4*t),r}finally{a.__wbindgen_add_to_stack_pointer(16)}}pieces(){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.wpboard_pieces(r,this.ptr);var e=x()[r/4+0],t=x()[r/4+1],n=S(e,t).slice();return a.__wbindgen_free(e,4*t),n}finally{a.__wbindgen_add_to_stack_pointer(16)}}fen(e){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.wpboard_fen(r,this.ptr,v(e)?16777215:e?1:0);var t=x()[r/4+0],n=x()[r/4+1];return d(t,n)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(t,n)}}}function P(e,t){return p(new Error(d(e,t)))}function U(e,t){return p(d(e,t))}function I(e,t){return p(JSON.parse(d(e,t)))}function $(){return p(new Error)}function M(e,t){const n=m(l(t).stack,a.__wbindgen_malloc,a.__wbindgen_realloc),r=h;x()[e/4+1]=r,x()[e/4+0]=n}function B(e,t){try{console.error(d(e,t))}finally{a.__wbindgen_free(e,t)}}function L(e){b(e)}function D(e,t){throw new Error(d(e,t))}o()}catch(W){o(W)}}))},328:(e,t,n)=>{n.a(e,(async(r,o)=>{try{var a,i=r([a=n(798)]),[a]=i.then?(await i)():i;await n.v(t,e.id,"5428d9b90577bf1d09cf",{"./index_bg.js":{__wbindgen_error_new:a.hd,__wbindgen_string_new:a.h4,__wbindgen_json_parse:a.t$,__wbg_new_693216e109162396:a.Ih,__wbg_stack_0ddaca5d1abfb52f:a.yq,__wbg_error_09919627ac0992f5:a.gk,__wbindgen_object_drop_ref:a.ug,__wbindgen_throw:a.Or}}),o()}catch(e){o(e)}}),1)}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return o[e](n,n.exports,i),n.loaded=!0,n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(o,a,i)=>{var _;i&&((_=[]).d=1);var c,s,d,u=new Set,f=o.exports,p=new Promise(((e,t)=>{d=t,s=e}));p[t]=f,p[e]=e=>(_&&e(_),u.forEach(e),p.catch((e=>{}))),o.exports=p,a((o=>{var a;c=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var a=[];a.d=0,o.then((e=>{i[t]=e,r(a)}),(e=>{i[n]=e,r(a)}));var i={};return i[e]=e=>e(a),i}}var _={};return _[e]=e=>{},_[t]=o,_})))(o);var i=()=>c.map((e=>{if(e[n])throw e[n];return e[t]})),s=new Promise((t=>{(a=()=>t(i)).r=0;var n=e=>e!==_&&!u.has(e)&&(u.add(e),e&&!e.d&&(a.r++,e.push(a)));c.map((t=>t[e](n)))}));return a.r?s:i()}),(e=>(e?d(p[n]=e):s(f),r(_)))),_&&(_.d=0)},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.v=(e,t,n,r)=>{var o=fetch(i.p+""+n+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(o,r).then((t=>Object.assign(e,t.instance.exports))):o.then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,r))).then((t=>Object.assign(e,t.instance.exports)))},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),i(448)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyZnRfd29ya2VyLmpzIiwibWFwcGluZ3MiOiJ1QkFBSUEsRUFDQUMsRUFDQUMsRUFDQUMsRSwyRkNBSkMsaUJBQWlCLFdBQVlDLElBQ3pCLE1BQU0sSUFBRUMsRUFBRyxNQUFFQyxFQUFLLFNBQUVDLEdBQWFILEVBQUVJLEtBQzdCQyxFQUFRLElBQUksS0FBUUosRUFBS0UsR0FDekJHLEdBQVMsUUFBTUQsRUFBT0gsR0FDNUJHLEVBQU1FLE9BQ05DLFlBQVlGLEVBQU8sSUFFdkJFLFlBQVksTSxpT0NOWixJQUFJQyxFQUFvQixJQUZvQixvQkFBaEJDLGFBQThCLEVBQUlDLEVBQU9DLFNBQVMsUUFBUUYsWUFBY0EsYUFFM0QsUUFBUyxDQUFFRyxXQUFXLEVBQU1DLE9BQU8sSUFFNUVMLEVBQWtCTSxTQUVsQixJQUFJQyxFQUFxQixJQUFJQyxXQUU3QixTQUFTQyxJQUlMLE9BSHNDLElBQWxDRixFQUFtQkcsYUFDbkJILEVBQXFCLElBQUlDLFdBQVcsa0JBRWpDRCxDQUNYLENBRUEsU0FBU0ksRUFBbUJDLEVBQUtDLEdBQzdCLE9BQU9iLEVBQWtCTSxPQUFPRyxJQUFrQkssU0FBU0YsRUFBS0EsRUFBTUMsR0FDMUUsQ0FFQSxNQUFNRSxFQUFPLElBQUlDLE1BQU0sSUFBSUMsVUFBS0MsR0FFaENILEVBQUtJLFVBQUtELEVBQVcsTUFBTSxHQUFNLEdBRWpDLElBQUlFLEVBQVlMLEVBQUtNLE9BRXJCLFNBQVNDLEVBQWNDLEdBQ2ZILElBQWNMLEVBQUtNLFFBQVFOLEVBQUtJLEtBQUtKLEVBQUtNLE9BQVMsR0FDdkQsTUFBTUcsRUFBTUosRUFJWixPQUhBQSxFQUFZTCxFQUFLUyxHQUVqQlQsRUFBS1MsR0FBT0QsRUFDTEMsQ0FDWCxDQUVBLFNBQVNDLEVBQVVELEdBQU8sT0FBT1QsRUFBS1MsRUFBTSxDQUU1QyxTQUFTRSxFQUFXRixHQUNaQSxFQUFNLEtBQ1ZULEVBQUtTLEdBQU9KLEVBQ1pBLEVBQVlJLEVBQ2hCLENBRUEsU0FBU0csRUFBV0gsR0FDaEIsTUFBTUksRUFBTUgsRUFBVUQsR0FFdEIsT0FEQUUsRUFBV0YsR0FDSkksQ0FDWCxDQUVBLElBQUlDLEVBQWtCLEVBSWxCQyxFQUFvQixJQUZvQixvQkFBaEJDLGFBQThCLEVBQUk3QixFQUFPQyxTQUFTLFFBQVE0QixZQUFjQSxhQUUzRCxTQUV6QyxNQUFNQyxFQUF3RCxtQkFBakNGLEVBQWtCRyxXQUN6QyxTQUFVQyxFQUFLQyxHQUNqQixPQUFPTCxFQUFrQkcsV0FBV0MsRUFBS0MsRUFDN0MsRUFDTSxTQUFVRCxFQUFLQyxHQUNqQixNQUFNQyxFQUFNTixFQUFrQk8sT0FBT0gsR0FFckMsT0FEQUMsRUFBS0csSUFBSUYsR0FDRixDQUNIRyxLQUFNTCxFQUFJYixPQUNWbUIsUUFBU0osRUFBSWYsT0FFckIsRUFFQSxTQUFTb0IsRUFBa0JQLEVBQUtRLEVBQVFDLEdBRXBDLFFBQWdCekIsSUFBWnlCLEVBQXVCLENBQ3ZCLE1BQU1QLEVBQU1OLEVBQWtCTyxPQUFPSCxHQUMvQnRCLEVBQU04QixFQUFPTixFQUFJZixRQUd2QixPQUZBWixJQUFrQkssU0FBU0YsRUFBS0EsRUFBTXdCLEVBQUlmLFFBQVFpQixJQUFJRixHQUN0RFAsRUFBa0JPLEVBQUlmLE9BQ2ZULENBQ1gsQ0FFQSxJQUFJQyxFQUFNcUIsRUFBSWIsT0FDVlQsRUFBTThCLEVBQU83QixHQUVqQixNQUFNK0IsRUFBTW5DLElBRVosSUFBSW9DLEVBQVMsRUFFYixLQUFPQSxFQUFTaEMsRUFBS2dDLElBQVUsQ0FDM0IsTUFBTUMsRUFBT1osRUFBSWEsV0FBV0YsR0FDNUIsR0FBSUMsRUFBTyxJQUFNLE1BQ2pCRixFQUFJaEMsRUFBTWlDLEdBQVVDLENBQ3hCLENBRUEsR0FBSUQsSUFBV2hDLEVBQUssQ0FDRCxJQUFYZ0MsSUFDQVgsRUFBTUEsRUFBSWMsTUFBTUgsSUFFcEJqQyxFQUFNK0IsRUFBUS9CLEVBQUtDLEVBQUtBLEVBQU1nQyxFQUFzQixFQUFiWCxFQUFJYixRQUMzQyxNQUFNYyxFQUFPMUIsSUFBa0JLLFNBQVNGLEVBQU1pQyxFQUFRakMsRUFBTUMsR0FHNURnQyxHQUZZYixFQUFhRSxFQUFLQyxHQUVoQkssT0FDbEIsQ0FHQSxPQURBWCxFQUFrQmdCLEVBQ1hqQyxDQUNYLENBRUEsU0FBU3FDLEVBQVdDLEdBQ2hCLE9BQU9BLE9BQ1gsQ0FFQSxJQUFJQyxFQUFxQixJQUFJQyxXQUU3QixTQUFTQyxJQUlMLE9BSHNDLElBQWxDRixFQUFtQnpDLGFBQ25CeUMsRUFBcUIsSUFBSUMsV0FBVyxrQkFFakNELENBQ1gsQ0FFQSxJQUFJRyxFQUFzQixJQUFJQyxZQVM5QixTQUFTQyxFQUF5QjVDLEVBQUtDLEdBQ25DLE1BQ01tQyxHQVJpQyxJQUFuQ00sRUFBb0I1QyxhQUNwQjRDLEVBQXNCLElBQUlDLFlBQVksa0JBRW5DRCxHQUtXeEMsU0FBU0YsRUFBTSxFQUFHQSxFQUFNLEVBQUlDLEdBQ3hDNEMsRUFBUyxHQUNmLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJVixFQUFNM0IsT0FBUXFDLElBQzlCRCxFQUFPdEMsS0FBS1EsRUFBV3FCLEVBQU1VLEtBRWpDLE9BQU9ELENBQ1gsQ0FFQSxTQUFTRSxFQUFhQyxFQUFVQyxHQUM1QixLQUFNRCxhQUFvQkMsR0FDdEIsTUFBTSxJQUFJQyxNQUFNLHdCQUF3QkQsRUFBTUUsUUFFbEQsT0FBT0gsRUFBU2hELEdBQ3BCLENBRUEsTUFBTW9ELEVBQWEsSUFBSVQsWUFBWSxHQUU3QlUsRUFBZ0IsSUFBSUMsZUFBZUYsRUFBV0csUUFNN0MsU0FBU0MsRUFBTXhFLEVBQU9ILEdBQ3pCLElBQ0ksTUFBTTRFLEVBQVMsbUNBQXNDLElBQ3JEVixFQUFhL0QsRUFBTzBFLEdBQ3BCLFFBQVdELEVBQVF6RSxFQUFNZ0IsSUFBS25CLEdBQzlCLElBQUk4RSxFQUFLbEIsSUFBa0JnQixFQUFTLEVBQUksR0FDcENHLEVBQUtuQixJQUFrQmdCLEVBQVMsRUFBSSxHQUl4QyxPQUhBTCxFQUFXLEdBQUtPLEVBQ2hCUCxFQUFXLEdBQUtRLEVBQ0xQLEVBQWMsRUFJN0IsQ0FGRSxRQUNFLGtDQUFxQyxHQUN6QyxDQUNKLENBaUNPLE1BQU1LLEVBRVRHLGNBQWM3RCxHQUNWLE1BQU1XLEVBQU1tRCxPQUFPQyxPQUFPTCxFQUFRTSxXQUdsQyxPQUZBckQsRUFBSVgsSUFBTUEsRUFFSFcsQ0FDWCxDQUVBc0QscUJBQ0ksTUFBTWpFLEVBQU1rRSxLQUFLbEUsSUFHakIsT0FGQWtFLEtBQUtsRSxJQUFNLEVBRUpBLENBQ1gsQ0FFQWQsT0FDSSxNQUFNYyxFQUFNa0UsS0FBS0QscUJBQ2pCLHFCQUF3QmpFLEVBQzVCLENBS0FtRSxZQUFZdkYsRUFBS0UsR0FDYixJQUNJLE1BQU0yRSxFQUFTLG1DQUFzQyxJQUMvQ1csRUFBT3ZDLEVBQWtCakQsRUFBSyxvQkFBd0Isc0JBQ3REeUYsRUFBT3BELEVBQ2IsY0FBaUJ3QyxFQUFRVyxFQUFNQyxFQUFNaEMsRUFBV3ZELEdBQVksU0FBV0EsRUFBVyxFQUFJLEdBQ3RGLElBQUk2RSxFQUFLbEIsSUFBa0JnQixFQUFTLEVBQUksR0FDcENHLEVBQUtuQixJQUFrQmdCLEVBQVMsRUFBSSxHQUV4QyxHQURTaEIsSUFBa0JnQixFQUFTLEVBQUksR0FFcEMsTUFBTTFDLEVBQVc2QyxHQUVyQixPQUFPRixFQUFRWSxPQUFPWCxFQUcxQixDQUZFLFFBQ0Usa0NBQXFDLEdBQ3pDLENBQ0osQ0FLQVksS0FBS0MsR0FDRCxJQUNJLE1BQU1mLEVBQVMsbUNBQXNDLElBQy9DVyxFQUFPdkMsRUFBa0IyQyxFQUFJLG9CQUF3QixzQkFDckRILEVBQU9wRCxFQUNiLGVBQWtCd0MsRUFBUVMsS0FBS2xFLElBQUtvRSxFQUFNQyxHQUMxQyxJQUFJVixFQUFLbEIsSUFBa0JnQixFQUFTLEVBQUksR0FDcENHLEVBQUtuQixJQUFrQmdCLEVBQVMsRUFBSSxHQUV4QyxHQURTaEIsSUFBa0JnQixFQUFTLEVBQUksR0FFcEMsTUFBTTFDLEVBQVc2QyxHQUVyQixPQUFPRixFQUFRWSxPQUFPWCxFQUcxQixDQUZFLFFBQ0Usa0NBQXFDLEdBQ3pDLENBQ0osQ0FJQWMsUUFDSSxJQUNJLE1BQU1oQixFQUFTLG1DQUFzQyxJQUNyRCxnQkFBbUJBLEVBQVFTLEtBQUtsRSxLQUNoQyxJQUFJMkQsRUFBS2xCLElBQWtCZ0IsRUFBUyxFQUFJLEdBQ3BDRyxFQUFLbkIsSUFBa0JnQixFQUFTLEVBQUksR0FDcENpQixFQUFLakMsSUFBa0JnQixFQUFTLEVBQUksR0FFeEMsR0FEU2hCLElBQWtCZ0IsRUFBUyxFQUFJLEdBRXBDLE1BQU0xQyxFQUFXMkQsR0FFckIsSUFBSUMsRUFBSy9CLEVBQXlCZSxFQUFJQyxHQUFJeEIsUUFFMUMsT0FEQSxrQkFBcUJ1QixFQUFTLEVBQUxDLEdBQ2xCZSxDQUdYLENBRkUsUUFDRSxrQ0FBcUMsR0FDekMsQ0FDSixDQUlBQyxTQUNJLElBQ0ksTUFBTW5CLEVBQVMsbUNBQXNDLElBQ3JELGlCQUFvQkEsRUFBUVMsS0FBS2xFLEtBQ2pDLElBQUkyRCxFQUFLbEIsSUFBa0JnQixFQUFTLEVBQUksR0FDcENHLEVBQUtuQixJQUFrQmdCLEVBQVMsRUFBSSxHQUNwQ2tCLEVBQUsvQixFQUF5QmUsRUFBSUMsR0FBSXhCLFFBRTFDLE9BREEsa0JBQXFCdUIsRUFBUyxFQUFMQyxHQUNsQmUsQ0FHWCxDQUZFLFFBQ0Usa0NBQXFDLEdBQ3pDLENBQ0osQ0FLQS9GLElBQUlFLEdBQ0EsSUFDSSxNQUFNMkUsRUFBUyxtQ0FBc0MsSUFDckQsY0FBaUJBLEVBQVFTLEtBQUtsRSxJQUFLcUMsRUFBV3ZELEdBQVksU0FBV0EsRUFBVyxFQUFJLEdBQ3BGLElBQUk2RSxFQUFLbEIsSUFBa0JnQixFQUFTLEVBQUksR0FDcENHLEVBQUtuQixJQUFrQmdCLEVBQVMsRUFBSSxHQUN4QyxPQUFPMUQsRUFBbUI0RCxFQUFJQyxFQUlsQyxDQUhFLFFBQ0Usa0NBQXFDLElBQ3JDLGtCQUFxQkQsRUFBSUMsRUFDN0IsQ0FDSixFQUdHLFNBQVNpQixFQUFxQkMsRUFBTUMsR0FFdkMsT0FBT3JFLEVBREssSUFBSXdDLE1BQU1uRCxFQUFtQitFLEVBQU1DLElBRW5ELENBRU8sU0FBU0MsRUFBc0JGLEVBQU1DLEdBRXhDLE9BQU9yRSxFQURLWCxFQUFtQitFLEVBQU1DLEdBRXpDLENBRU8sU0FBU0UsRUFBc0JILEVBQU1DLEdBRXhDLE9BQU9yRSxFQURLd0UsS0FBS0MsTUFBTXBGLEVBQW1CK0UsRUFBTUMsSUFFcEQsQ0FFTyxTQUFTSyxJQUVaLE9BQU8xRSxFQURLLElBQUl3QyxNQUVwQixDQUVPLFNBQVNtQyxFQUE2QlAsRUFBTUMsR0FDL0MsTUFDTVgsRUFBT3ZDLEVBRERoQixFQUFVa0UsR0FBTU8sTUFDUSxvQkFBd0Isc0JBQ3REakIsRUFBT3BELEVBQ2J3QixJQUFrQnFDLEVBQU8sRUFBSSxHQUFLVCxFQUNsQzVCLElBQWtCcUMsRUFBTyxFQUFJLEdBQUtWLENBQ3RDLENBRU8sU0FBU21CLEVBQTZCVCxFQUFNQyxHQUMvQyxJQUNJUyxRQUFRQyxNQUFNMUYsRUFBbUIrRSxFQUFNQyxHQUczQyxDQUZFLFFBQ0Usa0JBQXFCRCxFQUFNQyxFQUMvQixDQUNKLENBRU8sU0FBU1csRUFBMkJaLEdBQ3ZDL0QsRUFBVytELEVBQ2YsQ0FFTyxTQUFTYSxFQUFpQmIsRUFBTUMsR0FDbkMsTUFBTSxJQUFJN0IsTUFBTW5ELEVBQW1CK0UsRUFBTUMsR0FDN0MsQyw2YUN2V0lhLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQnhGLElBQWpCeUYsRUFDSCxPQUFPQSxFQUFhQyxRQUdyQixJQUFJMUcsRUFBU3NHLEVBQXlCRSxHQUFZLENBQ2pERyxHQUFJSCxFQUNKSSxRQUFRLEVBQ1JGLFFBQVMsQ0FBQyxHQVVYLE9BTkFHLEVBQW9CTCxHQUFVeEcsRUFBUUEsRUFBTzBHLFFBQVNILEdBR3REdkcsRUFBTzRHLFFBQVMsRUFHVDVHLEVBQU8wRyxPQUNmLENIekJJMUgsRUFBa0MsbUJBQVg4SCxPQUF3QkEsT0FBTyxrQkFBb0IscUJBQzFFN0gsRUFBbUMsbUJBQVg2SCxPQUF3QkEsT0FBTyxtQkFBcUIsc0JBQzVFNUgsRUFBaUMsbUJBQVg0SCxPQUF3QkEsT0FBTyxpQkFBbUIsb0JBQ3hFM0gsRUFBZ0I0SCxJQUNoQkEsSUFBVUEsRUFBTUMsSUFDbEJELEVBQU1DLEVBQUksRUFDVkQsRUFBTUUsU0FBU0MsR0FBUUEsRUFBR0MsTUFDMUJKLEVBQU1FLFNBQVNDLEdBQVFBLEVBQUdDLElBQU1ELEVBQUdDLElBQU1ELE1BQzFDLEVBeUJEWCxFQUFvQmEsRUFBSSxDQUFDcEgsRUFBUXFILEVBQU1DLEtBQ3RDLElBQUlQLEVBQ0pPLEtBQWNQLEVBQVEsSUFBSUMsRUFBSSxHQUM5QixJQUVJTyxFQUNBQyxFQUNBQyxFQUpBQyxFQUFZLElBQUlDLElBQ2hCakIsRUFBVTFHLEVBQU8wRyxRQUlqQmtCLEVBQVUsSUFBSUMsU0FBUSxDQUFDQyxFQUFTQyxLQUNuQ04sRUFBU00sRUFDVFAsRUFBZU0sQ0FBTyxJQUV2QkYsRUFBUTNJLEdBQWtCeUgsRUFDMUJrQixFQUFRNUksR0FBa0JrSSxJQUFRSCxHQUFTRyxFQUFHSCxHQUFRVyxFQUFVVCxRQUFRQyxHQUFLVSxFQUFlLE9BQUU1RSxTQUM5RmhELEVBQU8wRyxRQUFVa0IsRUFDakJQLEdBQU1XLElBRUwsSUFBSWQsRUFESkssRUF2Q2EsQ0FBQ1MsR0FBVUEsRUFBS0MsS0FBS0MsSUFDbkMsR0FBVyxPQUFSQSxHQUErQixpQkFBUkEsRUFBa0IsQ0FDM0MsR0FBR0EsRUFBSWxKLEdBQWdCLE9BQU9rSixFQUM5QixHQUFHQSxFQUFJQyxLQUFNLENBQ1osSUFBSXBCLEVBQVEsR0FDWkEsRUFBTUMsRUFBSSxFQUNWa0IsRUFBSUMsTUFBTWhCLElBQ1Q5RixFQUFJcEMsR0FBa0JrSSxFQUN0QmhJLEVBQWE0SCxFQUFNLElBQ2hCMUgsSUFDSGdDLEVBQUluQyxHQUFnQkcsRUFDcEJGLEVBQWE0SCxFQUFNLElBRXBCLElBQUkxRixFQUFNLENBQUMsRUFFWCxPQURBQSxFQUFJckMsR0FBa0JrSSxHQUFRQSxFQUFHSCxHQUMxQjFGLENBQ1IsQ0FDRCxDQUNBLElBQUlLLEVBQU0sQ0FBQyxFQUdYLE9BRkFBLEVBQUkxQyxHQUFpQmdFLE1BQ3JCdEIsRUFBSXpDLEdBQWtCaUosRUFDZnhHLENBQUcsSUFrQkswRyxDQUFTSixHQUV2QixJQUFJSyxFQUFZLElBQU9kLEVBQVlVLEtBQUtqQixJQUN2QyxHQUFHQSxFQUFFOUgsR0FBZSxNQUFNOEgsRUFBRTlILEdBQzVCLE9BQU84SCxFQUFFL0gsRUFBZSxJQUVyQjJJLEVBQVUsSUFBSUMsU0FBU0MsS0FDMUJaLEVBQUssSUFBT1ksRUFBUU8sSUFDakJsQixFQUFJLEVBQ1AsSUFBSW1CLEVBQVdDLEdBQU9BLElBQU14QixJQUFVVyxFQUFVYyxJQUFJRCxLQUFPYixFQUFVZSxJQUFJRixHQUFJQSxJQUFNQSxFQUFFdkIsSUFBTUUsRUFBR0MsSUFBS29CLEVBQUV0SCxLQUFLaUcsS0FDMUdLLEVBQVlVLEtBQUtDLEdBQVNBLEVBQUlsSixHQUFlc0osSUFBVSxJQUV4RCxPQUFPcEIsRUFBR0MsRUFBSVMsRUFBVVMsR0FBVyxJQUNoQ0ssSUFBVUEsRUFBTWpCLEVBQU9HLEVBQVExSSxHQUFnQndKLEdBQU9sQixFQUFhZCxHQUFXdkgsRUFBYTRILE1BQy9GQSxJQUFVQSxFQUFNQyxFQUFJLEVBQUUsRUk5RHZCVCxFQUFvQlMsRUFBSSxDQUFDTixFQUFTaUMsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYcEMsRUFBb0JzQyxFQUFFRixFQUFZQyxLQUFTckMsRUFBb0JzQyxFQUFFbkMsRUFBU2tDLElBQzVFcEUsT0FBT3NFLGVBQWVwQyxFQUFTa0MsRUFBSyxDQUFFRyxZQUFZLEVBQU1DLElBQUtMLEVBQVdDLElBRTFFLEVDTkRyQyxFQUFvQjBDLEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT3RFLE1BQVEsSUFBSXVFLFNBQVMsY0FBYixFQUdoQixDQUZFLE1BQU85SixHQUNSLEdBQXNCLGlCQUFYK0osT0FBcUIsT0FBT0EsTUFDeEMsQ0FDQSxDQVB1QixHQ0F4QjdDLEVBQW9COEMsSUFBT3JKLEtBQzFCQSxFQUFTd0UsT0FBT0MsT0FBT3pFLElBQ1hzSixXQUFVdEosRUFBT3NKLFNBQVcsSUFDeEM5RSxPQUFPc0UsZUFBZTlJLEVBQVEsVUFBVyxDQUN4QytJLFlBQVksRUFDWjNHLElBQUssS0FDSixNQUFNLElBQUl3QixNQUFNLDBGQUE0RjVELEVBQU8yRyxHQUFHLElBR2pIM0csR0NUUnVHLEVBQW9Cc0MsRUFBSSxDQUFDeEgsRUFBS2tJLElBQVUvRSxPQUFPRSxVQUFVOEUsZUFBZUMsS0FBS3BJLEVBQUtrSSxHQ0FsRmhELEVBQW9CbUQsRUFBSSxDQUFDaEQsRUFBU2lELEVBQWNDLEVBQWdCQyxLQUMvRCxJQUFJQyxFQUFNQyxNQUFNeEQsRUFBb0J5RCxFQUFJLEdBQUtKLEVBQWlCLGdCQUM5RCxNQUFnRCxtQkFBckNLLFlBQVlDLHFCQUNmRCxZQUFZQyxxQkFBcUJKLEVBQUtELEdBQzNDMUIsTUFBTWdDLEdBQVMzRixPQUFPNEYsT0FBTzFELEVBQVN5RCxFQUFJekcsU0FBU2dELFdBRS9Db0QsRUFDTDNCLE1BQU1uRixHQUFPQSxFQUFFcUgsZ0JBQ2ZsQyxNQUFNbUMsR0FBV0wsWUFBWU0sWUFBWUQsRUFBT1QsS0FDaEQxQixNQUFNZ0MsR0FBUzNGLE9BQU80RixPQUFPMUQsRUFBU3lELEVBQUl6RyxTQUFTZ0QsVUFBVSxFLE1DVGhFLElBQUk4RCxFQUNBakUsRUFBb0IwQyxFQUFFd0IsZ0JBQWVELEVBQVlqRSxFQUFvQjBDLEVBQUV5QixTQUFXLElBQ3RGLElBQUlDLEVBQVdwRSxFQUFvQjBDLEVBQUUwQixTQUNyQyxJQUFLSCxHQUFhRyxJQUNiQSxFQUFTQyxnQkFDWkosRUFBWUcsRUFBU0MsY0FBY0MsTUFDL0JMLEdBQVcsQ0FDZixJQUFJTSxFQUFVSCxFQUFTSSxxQkFBcUIsVUFDekNELEVBQVEzSixTQUFRcUosRUFBWU0sRUFBUUEsRUFBUTNKLE9BQVMsR0FBRzBKLElBQzVELENBSUQsSUFBS0wsRUFBVyxNQUFNLElBQUk1RyxNQUFNLHlEQUNoQzRHLEVBQVlBLEVBQVVRLFFBQVEsT0FBUSxJQUFJQSxRQUFRLFFBQVMsSUFBSUEsUUFBUSxZQUFhLEtBQ3BGekUsRUFBb0J5RCxFQUFJUSxDLEtDWkVqRSxFQUFvQixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VicGVyZnQvd2VicGFjay9ydW50aW1lL2FzeW5jIG1vZHVsZSIsIndlYnBhY2s6Ly93ZWJwZXJmdC8uL3NyYy9wZXJmdF93b3JrZXIudHMiLCJ3ZWJwYWNrOi8vd2VicGVyZnQvLi9zcmMvd2VicGVyZnQvcGtnL2luZGV4X2JnLmpzIiwid2VicGFjazovL3dlYnBlcmZ0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYnBlcmZ0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly93ZWJwZXJmdC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3dlYnBlcmZ0L3dlYnBhY2svcnVudGltZS9oYXJtb255IG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8vd2VicGVyZnQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWJwZXJmdC93ZWJwYWNrL3J1bnRpbWUvd2FzbSBsb2FkaW5nIiwid2VicGFjazovL3dlYnBlcmZ0L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYnBlcmZ0L3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgd2VicGFja1F1ZXVlcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbChcIndlYnBhY2sgcXVldWVzXCIpIDogXCJfX3dlYnBhY2tfcXVldWVzX19cIjtcbnZhciB3ZWJwYWNrRXhwb3J0cyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbChcIndlYnBhY2sgZXhwb3J0c1wiKSA6IFwiX193ZWJwYWNrX2V4cG9ydHNfX1wiO1xudmFyIHdlYnBhY2tFcnJvciA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbChcIndlYnBhY2sgZXJyb3JcIikgOiBcIl9fd2VicGFja19lcnJvcl9fXCI7XG52YXIgcmVzb2x2ZVF1ZXVlID0gKHF1ZXVlKSA9PiB7XG5cdGlmKHF1ZXVlICYmICFxdWV1ZS5kKSB7XG5cdFx0cXVldWUuZCA9IDE7XG5cdFx0cXVldWUuZm9yRWFjaCgoZm4pID0+IChmbi5yLS0pKTtcblx0XHRxdWV1ZS5mb3JFYWNoKChmbikgPT4gKGZuLnItLSA/IGZuLnIrKyA6IGZuKCkpKTtcblx0fVxufVxudmFyIHdyYXBEZXBzID0gKGRlcHMpID0+IChkZXBzLm1hcCgoZGVwKSA9PiB7XG5cdGlmKGRlcCAhPT0gbnVsbCAmJiB0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKSB7XG5cdFx0aWYoZGVwW3dlYnBhY2tRdWV1ZXNdKSByZXR1cm4gZGVwO1xuXHRcdGlmKGRlcC50aGVuKSB7XG5cdFx0XHR2YXIgcXVldWUgPSBbXTtcblx0XHRcdHF1ZXVlLmQgPSAwO1xuXHRcdFx0ZGVwLnRoZW4oKHIpID0+IHtcblx0XHRcdFx0b2JqW3dlYnBhY2tFeHBvcnRzXSA9IHI7XG5cdFx0XHRcdHJlc29sdmVRdWV1ZShxdWV1ZSk7XG5cdFx0XHR9LCAoZSkgPT4ge1xuXHRcdFx0XHRvYmpbd2VicGFja0Vycm9yXSA9IGU7XG5cdFx0XHRcdHJlc29sdmVRdWV1ZShxdWV1ZSk7XG5cdFx0XHR9KTtcblx0XHRcdHZhciBvYmogPSB7fTtcblx0XHRcdG9ialt3ZWJwYWNrUXVldWVzXSA9IChmbikgPT4gKGZuKHF1ZXVlKSk7XG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH1cblx0fVxuXHR2YXIgcmV0ID0ge307XG5cdHJldFt3ZWJwYWNrUXVldWVzXSA9IHggPT4ge307XG5cdHJldFt3ZWJwYWNrRXhwb3J0c10gPSBkZXA7XG5cdHJldHVybiByZXQ7XG59KSk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLmEgPSAobW9kdWxlLCBib2R5LCBoYXNBd2FpdCkgPT4ge1xuXHR2YXIgcXVldWU7XG5cdGhhc0F3YWl0ICYmICgocXVldWUgPSBbXSkuZCA9IDEpO1xuXHR2YXIgZGVwUXVldWVzID0gbmV3IFNldCgpO1xuXHR2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzO1xuXHR2YXIgY3VycmVudERlcHM7XG5cdHZhciBvdXRlclJlc29sdmU7XG5cdHZhciByZWplY3Q7XG5cdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlaikgPT4ge1xuXHRcdHJlamVjdCA9IHJlajtcblx0XHRvdXRlclJlc29sdmUgPSByZXNvbHZlO1xuXHR9KTtcblx0cHJvbWlzZVt3ZWJwYWNrRXhwb3J0c10gPSBleHBvcnRzO1xuXHRwcm9taXNlW3dlYnBhY2tRdWV1ZXNdID0gKGZuKSA9PiAocXVldWUgJiYgZm4ocXVldWUpLCBkZXBRdWV1ZXMuZm9yRWFjaChmbiksIHByb21pc2VbXCJjYXRjaFwiXSh4ID0+IHt9KSk7XG5cdG1vZHVsZS5leHBvcnRzID0gcHJvbWlzZTtcblx0Ym9keSgoZGVwcykgPT4ge1xuXHRcdGN1cnJlbnREZXBzID0gd3JhcERlcHMoZGVwcyk7XG5cdFx0dmFyIGZuO1xuXHRcdHZhciBnZXRSZXN1bHQgPSAoKSA9PiAoY3VycmVudERlcHMubWFwKChkKSA9PiB7XG5cdFx0XHRpZihkW3dlYnBhY2tFcnJvcl0pIHRocm93IGRbd2VicGFja0Vycm9yXTtcblx0XHRcdHJldHVybiBkW3dlYnBhY2tFeHBvcnRzXTtcblx0XHR9KSlcblx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRmbiA9ICgpID0+IChyZXNvbHZlKGdldFJlc3VsdCkpO1xuXHRcdFx0Zm4uciA9IDA7XG5cdFx0XHR2YXIgZm5RdWV1ZSA9IChxKSA9PiAocSAhPT0gcXVldWUgJiYgIWRlcFF1ZXVlcy5oYXMocSkgJiYgKGRlcFF1ZXVlcy5hZGQocSksIHEgJiYgIXEuZCAmJiAoZm4ucisrLCBxLnB1c2goZm4pKSkpO1xuXHRcdFx0Y3VycmVudERlcHMubWFwKChkZXApID0+IChkZXBbd2VicGFja1F1ZXVlc10oZm5RdWV1ZSkpKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZm4uciA/IHByb21pc2UgOiBnZXRSZXN1bHQoKTtcblx0fSwgKGVycikgPT4gKChlcnIgPyByZWplY3QocHJvbWlzZVt3ZWJwYWNrRXJyb3JdID0gZXJyKSA6IG91dGVyUmVzb2x2ZShleHBvcnRzKSksIHJlc29sdmVRdWV1ZShxdWV1ZSkpKTtcblx0cXVldWUgJiYgKHF1ZXVlLmQgPSAwKTtcbn07IiwiaW1wb3J0IHsgUGVyZnRBcmdzIH0gZnJvbSBcIi4vcGVyZnRcIjtcclxuaW1wb3J0IHsgV3BCb2FyZCwgcGVyZnQgfSBmcm9tIFwiLi93ZWJwZXJmdC9wa2dcIjtcclxuXHJcbmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIChlOiBNZXNzYWdlRXZlbnQ8UGVyZnRBcmdzPikgPT4ge1xyXG4gICAgY29uc3QgeyBmZW4sIGRlcHRoLCBjaGVzczk2MCB9ID0gZS5kYXRhO1xyXG4gICAgY29uc3QgYm9hcmQgPSBuZXcgV3BCb2FyZChmZW4sIGNoZXNzOTYwKTtcclxuICAgIGNvbnN0IGxlYXZlcyA9IHBlcmZ0KGJvYXJkLCBkZXB0aCk7XHJcbiAgICBib2FyZC5mcmVlKCk7XHJcbiAgICBwb3N0TWVzc2FnZShsZWF2ZXMpO1xyXG59KTtcclxucG9zdE1lc3NhZ2UobnVsbCk7XHJcbiIsImltcG9ydCAqIGFzIHdhc20gZnJvbSAnLi9pbmRleF9iZy53YXNtJztcblxuY29uc3QgbFRleHREZWNvZGVyID0gdHlwZW9mIFRleHREZWNvZGVyID09PSAndW5kZWZpbmVkJyA/ICgwLCBtb2R1bGUucmVxdWlyZSkoJ3V0aWwnKS5UZXh0RGVjb2RlciA6IFRleHREZWNvZGVyO1xuXG5sZXQgY2FjaGVkVGV4dERlY29kZXIgPSBuZXcgbFRleHREZWNvZGVyKCd1dGYtOCcsIHsgaWdub3JlQk9NOiB0cnVlLCBmYXRhbDogdHJ1ZSB9KTtcblxuY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKCk7XG5cbmxldCBjYWNoZWRVaW50OE1lbW9yeTAgPSBuZXcgVWludDhBcnJheSgpO1xuXG5mdW5jdGlvbiBnZXRVaW50OE1lbW9yeTAoKSB7XG4gICAgaWYgKGNhY2hlZFVpbnQ4TWVtb3J5MC5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNhY2hlZFVpbnQ4TWVtb3J5MCA9IG5ldyBVaW50OEFycmF5KHdhc20ubWVtb3J5LmJ1ZmZlcik7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZWRVaW50OE1lbW9yeTA7XG59XG5cbmZ1bmN0aW9uIGdldFN0cmluZ0Zyb21XYXNtMChwdHIsIGxlbikge1xuICAgIHJldHVybiBjYWNoZWRUZXh0RGVjb2Rlci5kZWNvZGUoZ2V0VWludDhNZW1vcnkwKCkuc3ViYXJyYXkocHRyLCBwdHIgKyBsZW4pKTtcbn1cblxuY29uc3QgaGVhcCA9IG5ldyBBcnJheSgzMikuZmlsbCh1bmRlZmluZWQpO1xuXG5oZWFwLnB1c2godW5kZWZpbmVkLCBudWxsLCB0cnVlLCBmYWxzZSk7XG5cbmxldCBoZWFwX25leHQgPSBoZWFwLmxlbmd0aDtcblxuZnVuY3Rpb24gYWRkSGVhcE9iamVjdChvYmopIHtcbiAgICBpZiAoaGVhcF9uZXh0ID09PSBoZWFwLmxlbmd0aCkgaGVhcC5wdXNoKGhlYXAubGVuZ3RoICsgMSk7XG4gICAgY29uc3QgaWR4ID0gaGVhcF9uZXh0O1xuICAgIGhlYXBfbmV4dCA9IGhlYXBbaWR4XTtcblxuICAgIGhlYXBbaWR4XSA9IG9iajtcbiAgICByZXR1cm4gaWR4O1xufVxuXG5mdW5jdGlvbiBnZXRPYmplY3QoaWR4KSB7IHJldHVybiBoZWFwW2lkeF07IH1cblxuZnVuY3Rpb24gZHJvcE9iamVjdChpZHgpIHtcbiAgICBpZiAoaWR4IDwgMzYpIHJldHVybjtcbiAgICBoZWFwW2lkeF0gPSBoZWFwX25leHQ7XG4gICAgaGVhcF9uZXh0ID0gaWR4O1xufVxuXG5mdW5jdGlvbiB0YWtlT2JqZWN0KGlkeCkge1xuICAgIGNvbnN0IHJldCA9IGdldE9iamVjdChpZHgpO1xuICAgIGRyb3BPYmplY3QoaWR4KTtcbiAgICByZXR1cm4gcmV0O1xufVxuXG5sZXQgV0FTTV9WRUNUT1JfTEVOID0gMDtcblxuY29uc3QgbFRleHRFbmNvZGVyID0gdHlwZW9mIFRleHRFbmNvZGVyID09PSAndW5kZWZpbmVkJyA/ICgwLCBtb2R1bGUucmVxdWlyZSkoJ3V0aWwnKS5UZXh0RW5jb2RlciA6IFRleHRFbmNvZGVyO1xuXG5sZXQgY2FjaGVkVGV4dEVuY29kZXIgPSBuZXcgbFRleHRFbmNvZGVyKCd1dGYtOCcpO1xuXG5jb25zdCBlbmNvZGVTdHJpbmcgPSAodHlwZW9mIGNhY2hlZFRleHRFbmNvZGVyLmVuY29kZUludG8gPT09ICdmdW5jdGlvbidcbiAgICA/IGZ1bmN0aW9uIChhcmcsIHZpZXcpIHtcbiAgICByZXR1cm4gY2FjaGVkVGV4dEVuY29kZXIuZW5jb2RlSW50byhhcmcsIHZpZXcpO1xufVxuICAgIDogZnVuY3Rpb24gKGFyZywgdmlldykge1xuICAgIGNvbnN0IGJ1ZiA9IGNhY2hlZFRleHRFbmNvZGVyLmVuY29kZShhcmcpO1xuICAgIHZpZXcuc2V0KGJ1Zik7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVhZDogYXJnLmxlbmd0aCxcbiAgICAgICAgd3JpdHRlbjogYnVmLmxlbmd0aFxuICAgIH07XG59KTtcblxuZnVuY3Rpb24gcGFzc1N0cmluZ1RvV2FzbTAoYXJnLCBtYWxsb2MsIHJlYWxsb2MpIHtcblxuICAgIGlmIChyZWFsbG9jID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgYnVmID0gY2FjaGVkVGV4dEVuY29kZXIuZW5jb2RlKGFyZyk7XG4gICAgICAgIGNvbnN0IHB0ciA9IG1hbGxvYyhidWYubGVuZ3RoKTtcbiAgICAgICAgZ2V0VWludDhNZW1vcnkwKCkuc3ViYXJyYXkocHRyLCBwdHIgKyBidWYubGVuZ3RoKS5zZXQoYnVmKTtcbiAgICAgICAgV0FTTV9WRUNUT1JfTEVOID0gYnVmLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBsZXQgbGVuID0gYXJnLmxlbmd0aDtcbiAgICBsZXQgcHRyID0gbWFsbG9jKGxlbik7XG5cbiAgICBjb25zdCBtZW0gPSBnZXRVaW50OE1lbW9yeTAoKTtcblxuICAgIGxldCBvZmZzZXQgPSAwO1xuXG4gICAgZm9yICg7IG9mZnNldCA8IGxlbjsgb2Zmc2V0KyspIHtcbiAgICAgICAgY29uc3QgY29kZSA9IGFyZy5jaGFyQ29kZUF0KG9mZnNldCk7XG4gICAgICAgIGlmIChjb2RlID4gMHg3RikgYnJlYWs7XG4gICAgICAgIG1lbVtwdHIgKyBvZmZzZXRdID0gY29kZTtcbiAgICB9XG5cbiAgICBpZiAob2Zmc2V0ICE9PSBsZW4pIHtcbiAgICAgICAgaWYgKG9mZnNldCAhPT0gMCkge1xuICAgICAgICAgICAgYXJnID0gYXJnLnNsaWNlKG9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgcHRyID0gcmVhbGxvYyhwdHIsIGxlbiwgbGVuID0gb2Zmc2V0ICsgYXJnLmxlbmd0aCAqIDMpO1xuICAgICAgICBjb25zdCB2aWV3ID0gZ2V0VWludDhNZW1vcnkwKCkuc3ViYXJyYXkocHRyICsgb2Zmc2V0LCBwdHIgKyBsZW4pO1xuICAgICAgICBjb25zdCByZXQgPSBlbmNvZGVTdHJpbmcoYXJnLCB2aWV3KTtcblxuICAgICAgICBvZmZzZXQgKz0gcmV0LndyaXR0ZW47XG4gICAgfVxuXG4gICAgV0FTTV9WRUNUT1JfTEVOID0gb2Zmc2V0O1xuICAgIHJldHVybiBwdHI7XG59XG5cbmZ1bmN0aW9uIGlzTGlrZU5vbmUoeCkge1xuICAgIHJldHVybiB4ID09PSB1bmRlZmluZWQgfHwgeCA9PT0gbnVsbDtcbn1cblxubGV0IGNhY2hlZEludDMyTWVtb3J5MCA9IG5ldyBJbnQzMkFycmF5KCk7XG5cbmZ1bmN0aW9uIGdldEludDMyTWVtb3J5MCgpIHtcbiAgICBpZiAoY2FjaGVkSW50MzJNZW1vcnkwLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgY2FjaGVkSW50MzJNZW1vcnkwID0gbmV3IEludDMyQXJyYXkod2FzbS5tZW1vcnkuYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZEludDMyTWVtb3J5MDtcbn1cblxubGV0IGNhY2hlZFVpbnQzMk1lbW9yeTAgPSBuZXcgVWludDMyQXJyYXkoKTtcblxuZnVuY3Rpb24gZ2V0VWludDMyTWVtb3J5MCgpIHtcbiAgICBpZiAoY2FjaGVkVWludDMyTWVtb3J5MC5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNhY2hlZFVpbnQzMk1lbW9yeTAgPSBuZXcgVWludDMyQXJyYXkod2FzbS5tZW1vcnkuYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZFVpbnQzMk1lbW9yeTA7XG59XG5cbmZ1bmN0aW9uIGdldEFycmF5SnNWYWx1ZUZyb21XYXNtMChwdHIsIGxlbikge1xuICAgIGNvbnN0IG1lbSA9IGdldFVpbnQzMk1lbW9yeTAoKTtcbiAgICBjb25zdCBzbGljZSA9IG1lbS5zdWJhcnJheShwdHIgLyA0LCBwdHIgLyA0ICsgbGVuKTtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHRha2VPYmplY3Qoc2xpY2VbaV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gX2Fzc2VydENsYXNzKGluc3RhbmNlLCBrbGFzcykge1xuICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2Yga2xhc3MpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgaW5zdGFuY2Ugb2YgJHtrbGFzcy5uYW1lfWApO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdGFuY2UucHRyO1xufVxuXG5jb25zdCB1MzJDdnRTaGltID0gbmV3IFVpbnQzMkFycmF5KDIpO1xuXG5jb25zdCB1aW50NjRDdnRTaGltID0gbmV3IEJpZ1VpbnQ2NEFycmF5KHUzMkN2dFNoaW0uYnVmZmVyKTtcbi8qKlxuKiBAcGFyYW0ge1dwQm9hcmR9IGJvYXJkXG4qIEBwYXJhbSB7bnVtYmVyfSBkZXB0aFxuKiBAcmV0dXJucyB7YmlnaW50fVxuKi9cbmV4cG9ydCBmdW5jdGlvbiBwZXJmdChib2FyZCwgZGVwdGgpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGJvYXJkLCBXcEJvYXJkKTtcbiAgICAgICAgd2FzbS5wZXJmdChyZXRwdHIsIGJvYXJkLnB0ciwgZGVwdGgpO1xuICAgICAgICB2YXIgcjAgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMF07XG4gICAgICAgIHZhciByMSA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgdTMyQ3Z0U2hpbVswXSA9IHIwO1xuICAgICAgICB1MzJDdnRTaGltWzFdID0gcjE7XG4gICAgICAgIGNvbnN0IG4wID0gdWludDY0Q3Z0U2hpbVswXTtcbiAgICAgICAgcmV0dXJuIG4wO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigxNik7XG4gICAgfVxufVxuXG4vKipcbiogQHBhcmFtIHtXcEJvYXJkfSBib2FyZFxuKiBAcGFyYW0ge3N0cmluZ30gbXZcbiogQHJldHVybnMge3N0cmluZ31cbiovXG5leHBvcnQgZnVuY3Rpb24gY2hlc3M5NjBfbW92ZV90b19zdGFuZGFyZChib2FyZCwgbXYpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGJvYXJkLCBXcEJvYXJkKTtcbiAgICAgICAgY29uc3QgcHRyMCA9IHBhc3NTdHJpbmdUb1dhc20wKG12LCB3YXNtLl9fd2JpbmRnZW5fbWFsbG9jLCB3YXNtLl9fd2JpbmRnZW5fcmVhbGxvYyk7XG4gICAgICAgIGNvbnN0IGxlbjAgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgIHdhc20uY2hlc3M5NjBfbW92ZV90b19zdGFuZGFyZChyZXRwdHIsIGJvYXJkLnB0ciwgcHRyMCwgbGVuMCk7XG4gICAgICAgIHZhciByMCA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAwXTtcbiAgICAgICAgdmFyIHIxID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDFdO1xuICAgICAgICB2YXIgcjIgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMl07XG4gICAgICAgIHZhciByMyA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAzXTtcbiAgICAgICAgdmFyIHB0cjEgPSByMDtcbiAgICAgICAgdmFyIGxlbjEgPSByMTtcbiAgICAgICAgaWYgKHIzKSB7XG4gICAgICAgICAgICBwdHIxID0gMDsgbGVuMSA9IDA7XG4gICAgICAgICAgICB0aHJvdyB0YWtlT2JqZWN0KHIyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2V0U3RyaW5nRnJvbVdhc20wKHB0cjEsIGxlbjEpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigxNik7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKHB0cjEsIGxlbjEpO1xuICAgIH1cbn1cblxuLyoqXG4qL1xuZXhwb3J0IGNsYXNzIFdwQm9hcmQge1xuXG4gICAgc3RhdGljIF9fd3JhcChwdHIpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShXcEJvYXJkLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfX2Rlc3Ryb3lfaW50b19yYXcoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fZGVzdHJveV9pbnRvX3JhdygpO1xuICAgICAgICB3YXNtLl9fd2JnX3dwYm9hcmRfZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBmZW5cbiAgICAqIEBwYXJhbSB7Ym9vbGVhbiB8IHVuZGVmaW5lZH0gY2hlc3M5NjBcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGZlbiwgY2hlc3M5NjApIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICAgICAgY29uc3QgcHRyMCA9IHBhc3NTdHJpbmdUb1dhc20wKGZlbiwgd2FzbS5fX3diaW5kZ2VuX21hbGxvYywgd2FzbS5fX3diaW5kZ2VuX3JlYWxsb2MpO1xuICAgICAgICAgICAgY29uc3QgbGVuMCA9IFdBU01fVkVDVE9SX0xFTjtcbiAgICAgICAgICAgIHdhc20ud3Bib2FyZF9uZXcocmV0cHRyLCBwdHIwLCBsZW4wLCBpc0xpa2VOb25lKGNoZXNzOTYwKSA/IDB4RkZGRkZGIDogY2hlc3M5NjAgPyAxIDogMCk7XG4gICAgICAgICAgICB2YXIgcjAgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMF07XG4gICAgICAgICAgICB2YXIgcjEgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgICAgICB2YXIgcjIgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMl07XG4gICAgICAgICAgICBpZiAocjIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyB0YWtlT2JqZWN0KHIxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBXcEJvYXJkLl9fd3JhcChyMCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtzdHJpbmd9IG12XG4gICAgKiBAcmV0dXJucyB7V3BCb2FyZH1cbiAgICAqL1xuICAgIHBsYXkobXYpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICAgICAgY29uc3QgcHRyMCA9IHBhc3NTdHJpbmdUb1dhc20wKG12LCB3YXNtLl9fd2JpbmRnZW5fbWFsbG9jLCB3YXNtLl9fd2JpbmRnZW5fcmVhbGxvYyk7XG4gICAgICAgICAgICBjb25zdCBsZW4wID0gV0FTTV9WRUNUT1JfTEVOO1xuICAgICAgICAgICAgd2FzbS53cGJvYXJkX3BsYXkocmV0cHRyLCB0aGlzLnB0ciwgcHRyMCwgbGVuMCk7XG4gICAgICAgICAgICB2YXIgcjAgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMF07XG4gICAgICAgICAgICB2YXIgcjEgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgICAgICB2YXIgcjIgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMl07XG4gICAgICAgICAgICBpZiAocjIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyB0YWtlT2JqZWN0KHIxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBXcEJvYXJkLl9fd3JhcChyMCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge2FueVtdfVxuICAgICovXG4gICAgbW92ZXMoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgICAgIHdhc20ud3Bib2FyZF9tb3ZlcyhyZXRwdHIsIHRoaXMucHRyKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAwXTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgICAgIHZhciByMiA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAyXTtcbiAgICAgICAgICAgIHZhciByMyA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAzXTtcbiAgICAgICAgICAgIGlmIChyMykge1xuICAgICAgICAgICAgICAgIHRocm93IHRha2VPYmplY3QocjIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHYwID0gZ2V0QXJyYXlKc1ZhbHVlRnJvbVdhc20wKHIwLCByMSkuc2xpY2UoKTtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKHIwLCByMSAqIDQpO1xuICAgICAgICAgICAgcmV0dXJuIHYwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKDE2KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHthbnlbXX1cbiAgICAqL1xuICAgIHBpZWNlcygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICAgICAgd2FzbS53cGJvYXJkX3BpZWNlcyhyZXRwdHIsIHRoaXMucHRyKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAwXTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgICAgIHZhciB2MCA9IGdldEFycmF5SnNWYWx1ZUZyb21XYXNtMChyMCwgcjEpLnNsaWNlKCk7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZnJlZShyMCwgcjEgKiA0KTtcbiAgICAgICAgICAgIHJldHVybiB2MDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigxNik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW4gfCB1bmRlZmluZWR9IGNoZXNzOTYwXG4gICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICovXG4gICAgZmVuKGNoZXNzOTYwKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgICAgIHdhc20ud3Bib2FyZF9mZW4ocmV0cHRyLCB0aGlzLnB0ciwgaXNMaWtlTm9uZShjaGVzczk2MCkgPyAweEZGRkZGRiA6IGNoZXNzOTYwID8gMSA6IDApO1xuICAgICAgICAgICAgdmFyIHIwID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDBdO1xuICAgICAgICAgICAgdmFyIHIxID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDFdO1xuICAgICAgICAgICAgcmV0dXJuIGdldFN0cmluZ0Zyb21XYXNtMChyMCwgcjEpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKDE2KTtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKHIwLCByMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX2Vycm9yX25ldyhhcmcwLCBhcmcxKSB7XG4gICAgY29uc3QgcmV0ID0gbmV3IEVycm9yKGdldFN0cmluZ0Zyb21XYXNtMChhcmcwLCBhcmcxKSk7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX3N0cmluZ19uZXcoYXJnMCwgYXJnMSkge1xuICAgIGNvbnN0IHJldCA9IGdldFN0cmluZ0Zyb21XYXNtMChhcmcwLCBhcmcxKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JpbmRnZW5fanNvbl9wYXJzZShhcmcwLCBhcmcxKSB7XG4gICAgY29uc3QgcmV0ID0gSlNPTi5wYXJzZShnZXRTdHJpbmdGcm9tV2FzbTAoYXJnMCwgYXJnMSkpO1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJldCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfbmV3XzY5MzIxNmUxMDkxNjIzOTYoKSB7XG4gICAgY29uc3QgcmV0ID0gbmV3IEVycm9yKCk7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19zdGFja18wZGRhY2E1ZDFhYmZiNTJmKGFyZzAsIGFyZzEpIHtcbiAgICBjb25zdCByZXQgPSBnZXRPYmplY3QoYXJnMSkuc3RhY2s7XG4gICAgY29uc3QgcHRyMCA9IHBhc3NTdHJpbmdUb1dhc20wKHJldCwgd2FzbS5fX3diaW5kZ2VuX21hbGxvYywgd2FzbS5fX3diaW5kZ2VuX3JlYWxsb2MpO1xuICAgIGNvbnN0IGxlbjAgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgZ2V0SW50MzJNZW1vcnkwKClbYXJnMCAvIDQgKyAxXSA9IGxlbjA7XG4gICAgZ2V0SW50MzJNZW1vcnkwKClbYXJnMCAvIDQgKyAwXSA9IHB0cjA7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfZXJyb3JfMDk5MTk2MjdhYzA5OTJmNShhcmcwLCBhcmcxKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihnZXRTdHJpbmdGcm9tV2FzbTAoYXJnMCwgYXJnMSkpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKGFyZzAsIGFyZzEpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX29iamVjdF9kcm9wX3JlZihhcmcwKSB7XG4gICAgdGFrZU9iamVjdChhcmcwKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX3Rocm93KGFyZzAsIGFyZzEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0U3RyaW5nRnJvbVdhc20wKGFyZzAsIGFyZzEpKTtcbn07XG5cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5obWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZSA9IE9iamVjdC5jcmVhdGUobW9kdWxlKTtcblx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCAnZXhwb3J0cycsIHtcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdHNldDogKCkgPT4ge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFUyBNb2R1bGVzIG1heSBub3QgYXNzaWduIG1vZHVsZS5leHBvcnRzIG9yIGV4cG9ydHMuKiwgVXNlIEVTTSBleHBvcnQgc3ludGF4LCBpbnN0ZWFkOiAnICsgbW9kdWxlLmlkKTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gbW9kdWxlO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy52ID0gKGV4cG9ydHMsIHdhc21Nb2R1bGVJZCwgd2FzbU1vZHVsZUhhc2gsIGltcG9ydHNPYmopID0+IHtcblx0dmFyIHJlcSA9IGZldGNoKF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyB3YXNtTW9kdWxlSGFzaCArIFwiLm1vZHVsZS53YXNtXCIpO1xuXHRpZiAodHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKHJlcSwgaW1wb3J0c09iailcblx0XHRcdC50aGVuKChyZXMpID0+IChPYmplY3QuYXNzaWduKGV4cG9ydHMsIHJlcy5pbnN0YW5jZS5leHBvcnRzKSkpO1xuXHR9XG5cdHJldHVybiByZXFcblx0XHQudGhlbigoeCkgPT4gKHguYXJyYXlCdWZmZXIoKSkpXG5cdFx0LnRoZW4oKGJ5dGVzKSA9PiAoV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYnl0ZXMsIGltcG9ydHNPYmopKSlcblx0XHQudGhlbigocmVzKSA9PiAoT2JqZWN0LmFzc2lnbihleHBvcnRzLCByZXMuaW5zdGFuY2UuZXhwb3J0cykpKTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIHVzZWQgJ21vZHVsZScgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0OCk7XG4iXSwibmFtZXMiOlsid2VicGFja1F1ZXVlcyIsIndlYnBhY2tFeHBvcnRzIiwid2VicGFja0Vycm9yIiwicmVzb2x2ZVF1ZXVlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJmZW4iLCJkZXB0aCIsImNoZXNzOTYwIiwiZGF0YSIsImJvYXJkIiwibGVhdmVzIiwiZnJlZSIsInBvc3RNZXNzYWdlIiwiY2FjaGVkVGV4dERlY29kZXIiLCJUZXh0RGVjb2RlciIsIm1vZHVsZSIsInJlcXVpcmUiLCJpZ25vcmVCT00iLCJmYXRhbCIsImRlY29kZSIsImNhY2hlZFVpbnQ4TWVtb3J5MCIsIlVpbnQ4QXJyYXkiLCJnZXRVaW50OE1lbW9yeTAiLCJieXRlTGVuZ3RoIiwiZ2V0U3RyaW5nRnJvbVdhc20wIiwicHRyIiwibGVuIiwic3ViYXJyYXkiLCJoZWFwIiwiQXJyYXkiLCJmaWxsIiwidW5kZWZpbmVkIiwicHVzaCIsImhlYXBfbmV4dCIsImxlbmd0aCIsImFkZEhlYXBPYmplY3QiLCJvYmoiLCJpZHgiLCJnZXRPYmplY3QiLCJkcm9wT2JqZWN0IiwidGFrZU9iamVjdCIsInJldCIsIldBU01fVkVDVE9SX0xFTiIsImNhY2hlZFRleHRFbmNvZGVyIiwiVGV4dEVuY29kZXIiLCJlbmNvZGVTdHJpbmciLCJlbmNvZGVJbnRvIiwiYXJnIiwidmlldyIsImJ1ZiIsImVuY29kZSIsInNldCIsInJlYWQiLCJ3cml0dGVuIiwicGFzc1N0cmluZ1RvV2FzbTAiLCJtYWxsb2MiLCJyZWFsbG9jIiwibWVtIiwib2Zmc2V0IiwiY29kZSIsImNoYXJDb2RlQXQiLCJzbGljZSIsImlzTGlrZU5vbmUiLCJ4IiwiY2FjaGVkSW50MzJNZW1vcnkwIiwiSW50MzJBcnJheSIsImdldEludDMyTWVtb3J5MCIsImNhY2hlZFVpbnQzMk1lbW9yeTAiLCJVaW50MzJBcnJheSIsImdldEFycmF5SnNWYWx1ZUZyb21XYXNtMCIsInJlc3VsdCIsImkiLCJfYXNzZXJ0Q2xhc3MiLCJpbnN0YW5jZSIsImtsYXNzIiwiRXJyb3IiLCJuYW1lIiwidTMyQ3Z0U2hpbSIsInVpbnQ2NEN2dFNoaW0iLCJCaWdVaW50NjRBcnJheSIsImJ1ZmZlciIsInBlcmZ0IiwicmV0cHRyIiwiV3BCb2FyZCIsInIwIiwicjEiLCJzdGF0aWMiLCJPYmplY3QiLCJjcmVhdGUiLCJwcm90b3R5cGUiLCJfX2Rlc3Ryb3lfaW50b19yYXciLCJ0aGlzIiwiY29uc3RydWN0b3IiLCJwdHIwIiwibGVuMCIsIl9fd3JhcCIsInBsYXkiLCJtdiIsIm1vdmVzIiwicjIiLCJ2MCIsInBpZWNlcyIsIl9fd2JpbmRnZW5fZXJyb3JfbmV3IiwiYXJnMCIsImFyZzEiLCJfX3diaW5kZ2VuX3N0cmluZ19uZXciLCJfX3diaW5kZ2VuX2pzb25fcGFyc2UiLCJKU09OIiwicGFyc2UiLCJfX3diZ19uZXdfNjkzMjE2ZTEwOTE2MjM5NiIsIl9fd2JnX3N0YWNrXzBkZGFjYTVkMWFiZmI1MmYiLCJzdGFjayIsIl9fd2JnX2Vycm9yXzA5OTE5NjI3YWMwOTkyZjUiLCJjb25zb2xlIiwiZXJyb3IiLCJfX3diaW5kZ2VuX29iamVjdF9kcm9wX3JlZiIsIl9fd2JpbmRnZW5fdGhyb3ciLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwiaWQiLCJsb2FkZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiU3ltYm9sIiwicXVldWUiLCJkIiwiZm9yRWFjaCIsImZuIiwiciIsImEiLCJib2R5IiwiaGFzQXdhaXQiLCJjdXJyZW50RGVwcyIsIm91dGVyUmVzb2x2ZSIsInJlamVjdCIsImRlcFF1ZXVlcyIsIlNldCIsInByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlaiIsImRlcHMiLCJtYXAiLCJkZXAiLCJ0aGVuIiwid3JhcERlcHMiLCJnZXRSZXN1bHQiLCJmblF1ZXVlIiwicSIsImhhcyIsImFkZCIsImVyciIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIndpbmRvdyIsImhtZCIsImNoaWxkcmVuIiwicHJvcCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInYiLCJ3YXNtTW9kdWxlSWQiLCJ3YXNtTW9kdWxlSGFzaCIsImltcG9ydHNPYmoiLCJyZXEiLCJmZXRjaCIsInAiLCJXZWJBc3NlbWJseSIsImluc3RhbnRpYXRlU3RyZWFtaW5nIiwicmVzIiwiYXNzaWduIiwiYXJyYXlCdWZmZXIiLCJieXRlcyIsImluc3RhbnRpYXRlIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicmVwbGFjZSJdLCJzb3VyY2VSb290IjoiIn0=